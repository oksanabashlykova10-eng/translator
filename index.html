<iframe style="width:100%;height:620px;border:none" srcdoc="
<!doctype html>
<meta charset='utf-8'>

<div id='editor'>
  <h3>Translator editor</h3>

  <label>Dictionary (one per line)</label>
  <textarea id='dict'>
box = коробка
dark world = тёмный мир
magic = магия
</textarea>

  <button id='gen'>Generate iframe</button>

  <label>Preview</label>
  <iframe id='preview'></iframe>

  <label>Generated iframe</label>
  <textarea id='out'></textarea>
</div>

<style>
body{margin:0;font-family:Arial}
#editor{
  padding:12px;
  background:#0f172a;
  color:#fff;
}
textarea{
  width:100%;
  border-radius:8px;
  padding:8px;
  border:none;
  box-sizing:border-box;
  margin-bottom:8px;
}
#dict{height:100px}
#out{height:120px}
button{
  background:#22c55e;
  border:none;
  border-radius:8px;
  padding:8px 12px;
  cursor:pointer;
  margin-bottom:10px;
}
iframe{
  width:100%;
  height:220px;
  border:none;
  background:#00000022;
  border-radius:8px;
  margin-bottom:10px;
}
label{
  font-size:12px;
  opacity:.8;
}
</style>

<script>
function buildDict(text){
  var o={};
  text.split('\\n').forEach(function(l){
    if(!l.includes('=')) return;
    var p=l.split('=');
    var k=p[0].trim().toLowerCase();
    var v=p[1].trim();
    if(k&&v) o[k]=v;
  });
  return o;
}

function generate(){
  var dict=buildDict(document.getElementById('dict').value);
  var dictStr=JSON.stringify(dict);

  var widget=
'<iframe style=\"width:100%;height:360px;border:none\" srcdoc=\"'+
'<!doctype html><meta charset=\\'utf-8\\'>'+
'<div id=\\'t\\'><textarea id=\\'i\\'></textarea><button id=\\'b\\'>Translate</button><div id=\\'r\\'></div></div>'+
'<style>#t{font-family:Arial;background:#0f172a;color:#fff;padding:12px;border-radius:12px}textarea{width:100%;height:60px}</style>'+
'<script>var D='+dictStr+';document.getElementById(\\'b\\').onclick=function(){var t=document.getElementById(\\'i\\').value.toLowerCase();var o=t.split(\" \").map(w=>D[w]||w).join(\" \");document.getElementById(\\'r\\').innerText=o}</scr'+'ipt>'+
'\"></iframe>';

  document.getElementById('out').value=widget;
  document.getElementById('preview').srcdoc=widget;
}

document.getElementById('gen').onclick=generate;
generate();
</script>
"></iframe>
